---
import { useRef } from 'react';
import BaseLayout from '../layouts/BaseLayout.astro';
const favicon = '../images/Paul_Jhon_Magbanua_Logo-white.png'

//Components Imports Here
import NavigationBar from '../components/NavigationBar'
import HeroSection from '../components/HeroSection'
import AboutSection from '../components/AboutSection'
import SkillSection from '../components/SkillSection'
import ExperienceSection from '../components/ExperienceSection';
import EducationSection from '../components/EducationSection';
import FooterSection from '../components/FooterSection';
---
<link rel="icon" type="image/png" href={favicon}>
<BaseLayout title="Home Page">
	<NavigationBar client:load />
	<HeroSection client:load />
	<AboutSection client:visible /> 
	<SkillSection client:visible /> 
	<ExperienceSection client:visible />
	<EducationSection client:visible />
	<FooterSection client:visible />
</BaseLayout>
<script>
  const sections = ["home", "about", "skills", "experience", "education"];

  const observer = new IntersectionObserver(
    (entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          const id = entry.target.id;
          document.title =
            id.charAt(0).toUpperCase() + id.slice(1) + " | Paul Jhon Magbanua";
        }
      });
    },
    { threshold: 0.6 }
  );

  function attachObserver() {
    sections.forEach((id) => {
      const el = document.getElementById(id);
      if (el) observer.observe(el);
    });
  }

  document.addEventListener("astro:after-swap", attachObserver);
  window.addEventListener("load", attachObserver);
  setTimeout(attachObserver, 500);
</script>